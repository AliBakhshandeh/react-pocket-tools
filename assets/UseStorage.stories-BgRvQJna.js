import{j as e}from"./jsx-runtime-CDt2p4po.js";import{r as a}from"./index-GiUgBvb1.js";const T=()=>{const o=typeof window<"u",d=n=>n==="local"?"localStorage":"sessionStorage";return{getItem:(n,l)=>o?window[d(l)].getItem(n):null,setItem:(n,l,b)=>o?(window[d(b)].setItem(n,l),!0):!1,removeItem:(n,l)=>{o&&window[d(l)].removeItem(n)},clearStorage:()=>{o&&(window.localStorage.clear(),window.sessionStorage.clear())}}};function I(){const[o,d]=a.useState("demo-key"),[u,p]=a.useState("سلام دنیا"),[t,h]=a.useState("session"),[n,l]=a.useState(null),[b,m]=a.useState(0),{getItem:x,setItem:j,removeItem:w,clearStorage:N}=T(),g=a.useMemo(()=>{if(typeof window>"u")return{session:[],local:[]};const s=[],i=[];for(let c=0;c<window.sessionStorage.length;c+=1){const r=window.sessionStorage.key(c);!r||r!==o||s.push([r,window.sessionStorage.getItem(r)??""])}for(let c=0;c<window.localStorage.length;c+=1){const r=window.localStorage.key(c);!r||r!==o||i.push([r,window.localStorage.getItem(r)??""])}return{session:s,local:i}},[o,b]),C=a.useCallback(()=>{j(o,u,t),l(x(o,t)),m(s=>s+1)},[x,o,j,t,u]),E=a.useCallback(()=>{l(x(o,t)),m(s=>s+1)},[x,o,t]),R=a.useCallback(()=>{w(o,t),l(null),m(s=>s+1)},[o,w,t]),L=a.useCallback(()=>{N(),l(null),m(s=>s+1)},[N]),S=t==="session"?"sessionStorage":"localStorage";return e.jsxs("div",{className:"flex max-w-xl flex-col gap-4 text-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"مدیریت ذخیره‌سازی"}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"کلید"}),e.jsx("input",{value:o,onChange:s=>d(s.target.value),className:"rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"مثلاً user-token"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"مقدار"}),e.jsx("textarea",{value:u,onChange:s=>p(s.target.value),className:"h-24 rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"مقدار موردنظر را وارد کنید"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-700",children:[e.jsx("span",{className:"font-medium",children:"نوع ذخیره‌سازی:"}),e.jsxs("select",{value:t,onChange:s=>h(s.target.value),className:"rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[e.jsx("option",{value:"session",children:"sessionStorage"}),e.jsx("option",{value:"local",children:"localStorage"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:C,className:"rounded bg-blue-600 px-3 py-1.5 font-medium text-white transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["ذخیره در ",S]}),e.jsxs("button",{type:"button",onClick:E,className:"rounded border border-blue-600 px-3 py-1.5 font-medium text-blue-600 transition-colors hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["خواندن از ",S]}),e.jsx("button",{type:"button",onClick:R,className:"rounded border border-amber-500 px-3 py-1.5 font-medium text-amber-600 transition-colors hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-offset-2",children:"حذف کلید"}),e.jsx("button",{type:"button",onClick:L,className:"rounded border border-rose-500 px-3 py-1.5 font-medium text-rose-600 transition-colors hover:bg-rose-50 focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-offset-2",children:"پاک کردن هر دو storage"})]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"آخرین مقدار خوانده شده"}),e.jsx("code",{className:"mt-2 block min-h-[2rem] rounded bg-slate-900 p-2 text-xs text-slate-100",children:n??""})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"sessionStorage"}),g.session.length===0?e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"هیچ مقداری ذخیره نشده است."}):e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:g.session.map(([s,i])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold",children:[s,":"]})," ",i||"«خالی»"]},s))})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"localStorage"}),g.local.length===0?e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"هیچ مقداری ذخیره نشده است."}):e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:g.local.map(([s,i])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold",children:[s,":"]})," ",i||"«خالی»"]},s))})]})]})]})}const _={title:"Hooks/useStorage",component:I,parameters:{layout:"centered"},tags:["autodocs"]},f={render:()=>e.jsx(I,{})};var v,y,k;f.parameters={...f.parameters,docs:{...(v=f.parameters)==null?void 0:v.docs,source:{originalSource:`{
  render: () => <Example />
}`,...(k=(y=f.parameters)==null?void 0:y.docs)==null?void 0:k.source}}};const A=["Playground"];export{f as Playground,A as __namedExportsOrder,_ as default};
