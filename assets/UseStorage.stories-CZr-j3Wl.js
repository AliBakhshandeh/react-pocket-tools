import{j as e}from"./jsx-runtime-CDt2p4po.js";import{r}from"./index-GiUgBvb1.js";const R=()=>{const s=typeof window<"u",u=l=>l==="local"?"localStorage":"sessionStorage";return{getItem:(l,a)=>s?window[u(a)].getItem(l):null,setItem:(l,a,i)=>s?(window[u(i)].setItem(l,a),!0):!1,removeItem:(l,a)=>{s&&window[u(a)].removeItem(l)},clearStorage:()=>{s&&(window.localStorage.clear(),window.sessionStorage.clear())}}};function y(){const[s,u]=r.useState("demo-key"),[m,f]=r.useState("سلام دنیا"),[t,b]=r.useState("session"),[l,a]=r.useState(null),{getItem:i,setItem:p,removeItem:h,clearStorage:j}=R(),x=r.useMemo(()=>{if(typeof window>"u")return{session:[],local:[]};const o=[],d=[];for(let n=0;n<window.sessionStorage.length;n+=1){const c=window.sessionStorage.key(n);c&&o.push([c,window.sessionStorage.getItem(c)??""])}for(let n=0;n<window.localStorage.length;n+=1){const c=window.localStorage.key(n);c&&d.push([c,window.localStorage.getItem(c)??""])}return{session:o,local:d}},[l,s,m]),k=r.useCallback(()=>{p(s,m,t),a(i(s,t))},[i,s,p,t,m]),I=r.useCallback(()=>{a(i(s,t))},[i,s,t]),C=r.useCallback(()=>{h(s,t),a(null)},[s,h,t]),E=r.useCallback(()=>{j(),a(null)},[j]),w=t==="session"?"sessionStorage":"localStorage";return e.jsxs("div",{className:"flex max-w-xl flex-col gap-4 text-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h2",{className:"text-base font-semibold text-slate-900",children:"مدیریت ذخیره‌سازی"}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"کلید"}),e.jsx("input",{value:s,onChange:o=>u(o.target.value),className:"rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"مثلاً user-token"})]}),e.jsxs("label",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"مقدار"}),e.jsx("textarea",{value:m,onChange:o=>f(o.target.value),className:"h-24 rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",placeholder:"مقدار موردنظر را وارد کنید"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-slate-700",children:[e.jsx("span",{className:"font-medium",children:"نوع ذخیره‌سازی:"}),e.jsxs("select",{value:t,onChange:o=>b(o.target.value),className:"rounded border border-slate-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[e.jsx("option",{value:"session",children:"sessionStorage"}),e.jsx("option",{value:"local",children:"localStorage"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:k,className:"rounded bg-blue-600 px-3 py-1.5 font-medium text-white transition-colors hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["ذخیره در ",w]}),e.jsxs("button",{type:"button",onClick:I,className:"rounded border border-blue-600 px-3 py-1.5 font-medium text-blue-600 transition-colors hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:["خواندن از ",w]}),e.jsx("button",{type:"button",onClick:C,className:"rounded border border-amber-500 px-3 py-1.5 font-medium text-amber-600 transition-colors hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400 focus:ring-offset-2",children:"حذف کلید"}),e.jsx("button",{type:"button",onClick:E,className:"rounded border border-rose-500 px-3 py-1.5 font-medium text-rose-600 transition-colors hover:bg-rose-50 focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-offset-2",children:"پاک کردن هر دو storage"})]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"آخرین مقدار خوانده شده"}),e.jsx("code",{className:"mt-2 block rounded bg-slate-900 p-2 text-xs text-slate-100",children:l??"چیزی پیدا نشد"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"sessionStorage"}),x.session.length===0?e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"هیچ مقداری ذخیره نشده است."}):e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:x.session.map(([o,d])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold",children:[o,":"]})," ",d||"«خالی»"]},o))})]}),e.jsxs("div",{className:"rounded-lg border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"localStorage"}),x.local.length===0?e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"هیچ مقداری ذخیره نشده است."}):e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:x.local.map(([o,d])=>e.jsxs("li",{children:[e.jsxs("span",{className:"font-semibold",children:[o,":"]})," ",d||"«خالی»"]},o))})]})]})]})}const P={title:"Hooks/useStorage",component:y,parameters:{layout:"centered"},tags:["autodocs"]},g={render:()=>e.jsx(y,{})};var N,S,v;g.parameters={...g.parameters,docs:{...(N=g.parameters)==null?void 0:N.docs,source:{originalSource:`{
  render: () => <Example />
}`,...(v=(S=g.parameters)==null?void 0:S.docs)==null?void 0:v.source}}};const _=["Playground"];export{g as Playground,_ as __namedExportsOrder,P as default};
